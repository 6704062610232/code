<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏´‡∏≠‡∏û‡∏±‡∏Å</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --c1: #CCD5AE; --c2: #E9EDC9; --c3: #FEFAE0; --c4: #FAEDCD; --c5: #D4A373;
            --text: #555; --success: #4F772D;
        }

        body { margin: 0; background: var(--c3); font-family: 'Sarabun', sans-serif; color: var(--text); padding-bottom: 50px; }
        .container { max-width: 1100px; margin: auto; padding: 20px; }
        
        .header-brand { text-align: center; margin: 30px 0; }
        .header-brand h1 { color: var(--c5); font-size: 32px; font-weight: 600; }

        .card { background: white; border-radius: 24px; padding: 30px; box-shadow: 0 10px 30px rgba(0,0,0,.05); margin-bottom: 20px; }

        /* --- ‡∏ú‡∏±‡∏á‡∏´‡πâ‡∏≠‡∏á --- */
        .floor-section { margin-bottom: 30px; }
        .floor-title { font-weight: bold; color: var(--c5); margin-bottom: 15px; border-left: 5px solid var(--c5); padding-left: 15px; font-size: 1.2rem; }
        .room-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 12px; }
        
        .room-btn { 
            aspect-ratio: 1/1; border: 2px solid var(--c2); background: white; border-radius: 18px; 
            display: flex; flex-direction: column; align-items: center; justify-content: center; 
            cursor: pointer; transition: 0.3s; font-weight: bold; color: var(--text);
        }
        .room-btn:hover { background: var(--c4); transform: translateY(-3px); border-color: var(--c5); }
        .room-btn.has-contract { background: var(--c1); border-color: var(--success); color: var(--success); }
        .room-btn i { display: none; font-size: 16px; margin-bottom: 4px; }
        .room-btn.has-contract i { display: block; }

        /* --- ‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤ --- */
        #contract-view { display: none; }
        .toolbar { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; position: sticky; top: 10px; z-index: 100; }
        
        .contract-paper { 
            line-height: 1.8; 
            font-size: 16px; 
            color: #111; 
            padding: 25mm 20mm; 
            background: #fff; border: 1px solid #eee;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            max-width: 210mm; margin: auto;
        }

        .contract-paper h2 { text-align: center; margin-bottom: 30px; text-decoration: underline; }

        input[type="text"], input[type="number"] { 
            border: none; border-bottom: 1px dotted var(--c5); background: transparent; 
            padding: 0 5px; font-family: 'Sarabun'; font-size: 16px; outline: none; color: #000;
        }
        input:focus { background: #fff9c4; }

        .btn { padding: 12px 25px; border-radius: 50px; border: none; cursor: pointer; font-weight: bold; font-family: 'Sarabun'; display: flex; align-items: center; gap: 8px; font-size: 15px; }
        .btn-back { background: #eee; color: #555; }
        .btn-save { background: var(--success); color: white; }
        .btn-print { background: var(--c5); color: white; }

        .sig-row { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-top: 40px; text-align: center; }
        .sig-block { margin-bottom: 20px; }
        .sig-line { border-bottom: 1px solid #000; width: 80%; margin: 30px auto 5px auto; }

        /* --- ‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå (‡πÑ‡∏°‡πà‡πÄ‡∏≠‡∏≤‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏Ç‡∏´‡∏ô‡πâ‡∏≤) --- */
        @media print {
            @page { 
                size: A4; 
                margin: 0; /* ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏õ‡πá‡∏ô 0 ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ã‡πà‡∏≠‡∏ô‡∏´‡∏±‡∏ß/‡∏ó‡πâ‡∏≤‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏™‡∏£‡πâ‡∏≤‡∏á */
            }
            body { 
                background: white; 
                padding: 1.5cm; /* ‡∏°‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á‡πÉ‡∏´‡πâ‡∏Ç‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÅ‡∏ó‡∏ô */
            }
            .container { max-width: 100%; padding: 0; }
            .toolbar, .header-brand, #main-dashboard { display: none !important; }
            .card { box-shadow: none; border: none; padding: 0; margin: 0; }
            #contract-view { display: block !important; }
            
            .contract-paper { 
                border: none; box-shadow: none; padding: 0; 
                font-size: 13px !important; 
                line-height: 1.6 !important; 
                max-width: 100%;
            }
            .contract-paper h2 { 
                font-size: 20px !important; 
                margin-bottom: 20px !important; 
            }
            input { 
                border-bottom: none !important; 
                font-size: 13px !important;
            }
            .sig-row { 
                gap: 20px !important; 
                margin-top: 30px !important; 
            }
        }
    </style>
</head>
<body>

<div class="container" id="main-dashboard">
    <div class="header-brand">
        <h1><i class="fas fa-file-signature"></i> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤</h1>
        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡∏î‡∏π‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏¢‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏±‡∏á</p>
    </div>

    <div class="card" id="floor-plan">
        <!-- JS ‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ú‡∏±‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
    </div>
</div>

<!-- ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡∏ç‡∏ç‡∏≤ -->
<div class="container" id="contract-view">
    <div class="toolbar no-print">
        <button class="btn btn-back" onclick="closeContract()"><i class="fas fa-arrow-left"></i> ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ú‡∏±‡∏á‡∏´‡πâ‡∏≠‡∏á</button>
        <div style="display:flex; gap:10px;">
            <button class="btn btn-save" onclick="saveData()"><i class="fas fa-save"></i> ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ</button>
            <button class="btn btn-print" onclick="window.print()"><i class="fas fa-print"></i> ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏™‡∏±‡∏ç‡∏ç‡∏≤ (PDF)</button>
        </div>
    </div>

    <div class="card contract-paper" id="printable-contract">
        <h2>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏û‡∏±‡∏Å‡∏≠‡∏≤‡∏®‡∏±‡∏¢</h2>
        
        <div style="text-align: right; margin-bottom: 20px;">
            <strong>‡∏ó‡∏≥‡∏ó‡∏µ‡πà:</strong> <input type="text" id="loc_name" style="width: 200px;" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏´‡∏≠‡∏û‡∏±‡∏Å"><br>
            <strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</strong> <input type="text" id="c_day" style="width: 30px;" placeholder="‡∏ß‡∏±‡∏ô"> 
            <strong>‡πÄ‡∏î‡∏∑‡∏≠‡∏ô:</strong> <input type="text" id="c_month" style="width: 100px;" placeholder="‡πÄ‡∏î‡∏∑‡∏≠‡∏ô"> 
            <strong>‡∏û.‡∏®.</strong> <input type="text" id="c_year" style="width: 60px;" placeholder="‡∏õ‡∏µ">
        </div>

        <p>‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏â‡∏ö‡∏±‡∏ö‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡∏Ç‡∏∂‡πâ‡∏ô‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á:<br>
        <strong>‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤:</strong> <input type="text" id="owner_name" style="width: 250px;" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á"> 
        ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà <input type="text" id="owner_addr" style="width: 350px;" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤"> ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‚Äú‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤‚Äù ‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏Å‡∏±‡∏ö<br>
        <strong>‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤:</strong> <input type="text" id="tenant_name" style="width: 250px;" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤"> 
        ‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà <input type="text" id="tenant_id" style="width: 200px;" placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô"> 
        ‡∏≠‡∏¢‡∏π‡πà‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà <input type="text" id="tenant_addr" style="width: 350px;" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏ï‡∏≤‡∏°‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡∏ö‡πâ‡∏≤‡∏ô"> ‡∏ã‡∏∂‡πà‡∏á‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ß‡πà‡∏≤ ‚Äú‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‚Äù ‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á</p>

        <p>‡∏ó‡∏±‡πâ‡∏á‡∏™‡∏≠‡∏á‡∏ù‡πà‡∏≤‡∏¢‡∏ï‡∏Å‡∏•‡∏á‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏Å‡∏±‡∏ô‡∏î‡∏±‡∏á‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 1. ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡πå‡∏™‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡πà‡∏≤:</strong> ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤ ‡πÅ‡∏•‡∏∞‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏ä‡πà‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÄ‡∏•‡∏Ç‡∏ó‡∏µ‡πà 
        <strong style="font-size: 1.2em; color: var(--success);" id="display_room">---</strong> 
        ‡∏ä‡∏±‡πâ‡∏ô <input type="text" id="c_floor" style="width: 30px;"> ‡∏Ç‡∏≠‡∏á <input type="text" id="loc_name_2" style="width: 150px;"> ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 2. ‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πà‡∏≤:</strong> ‡∏°‡∏µ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏£‡∏∞‡∏¢‡∏∞‡πÄ‡∏ß‡∏•‡∏≤ <input type="text" id="c_term" style="width: 50px;"> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 
        <input type="text" id="c_start" style="width: 120px;"> ‡∏ñ‡∏∂‡∏á‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <input type="text" id="c_end" style="width: 120px;"></p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 3. ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°:</strong><br>
        3.1 ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡πÉ‡∏ô‡∏≠‡∏±‡∏ï‡∏£‡∏≤‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏•‡∏∞ <input type="text" id="c_rent" style="width: 100px;"> ‡∏ö‡∏≤‡∏ó<br>
        3.2 ‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏≥‡∏£‡∏∞‡∏†‡∏≤‡∏¢‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <input type="text" id="c_due" style="width: 30px;"> ‡∏Ç‡∏≠‡∏á‡∏ó‡∏∏‡∏Å‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏´‡∏≤‡∏Å‡∏•‡πà‡∏≤‡∏ä‡πâ‡∏≤‡∏ï‡∏Å‡∏•‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏±‡∏ö‡∏ß‡∏±‡∏ô‡∏•‡∏∞ <input type="text" id="c_fine" style="width: 50px;"> ‡∏ö‡∏≤‡∏ó<br>
        3.3 ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏•‡∏∞ <input type="text" id="c_elec" style="width: 40px;"> ‡∏ö‡∏≤‡∏ó / ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏•‡∏∞ <input type="text" id="c_water" style="width: 40px;"> ‡∏ö‡∏≤‡∏ó</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 4. ‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤:</strong> ‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏≥‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ô‡∏µ‡πâ ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡πÑ‡∏î‡πâ‡∏ß‡∏≤‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏à‡∏≥‡∏ô‡∏ß‡∏ô <input type="text" id="c_depo" style="width: 100px;"> ‡∏ö‡∏≤‡∏ó ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ 1 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô <input type="text" id="c_pre" style="width: 100px;"> ‡∏ö‡∏≤‡∏ó</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 5. ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤:</strong> ‡∏´‡πâ‡∏≤‡∏°‡∏ô‡∏≥‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•‡∏≠‡∏∑‡πà‡∏ô‡∏°‡∏≤‡∏û‡∏±‡∏Å‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏ñ‡∏≤‡∏ß‡∏£, ‡∏´‡πâ‡∏≤‡∏°‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á‡∏™‡∏±‡∏ï‡∏ß‡πå‡∏ó‡∏∏‡∏Å‡∏ä‡∏ô‡∏¥‡∏î, ‡∏´‡πâ‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏¥‡∏à‡∏Å‡∏≤‡∏£‡∏ú‡∏¥‡∏î‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢, ‡∏´‡πâ‡∏≤‡∏°‡∏î‡∏±‡∏î‡πÅ‡∏õ‡∏•‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å ‡πÅ‡∏•‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏á‡∏ö‡πÑ‡∏°‡πà‡∏™‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡∏£‡∏ö‡∏Å‡∏ß‡∏ô‡∏ú‡∏π‡πâ‡∏≠‡∏∑‡πà‡∏ô</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 6. ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏¥‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤:</strong> ‡∏´‡∏≤‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏£‡∏¥‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î ‡πÅ‡∏•‡∏∞‡∏´‡∏≤‡∏Å‡∏Ñ‡πâ‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏ô 15 ‡∏ß‡∏±‡∏ô ‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ</p>

        <p><strong>‡∏Ç‡πâ‡∏≠ 7. ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏∑‡∏ô‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å:</strong> ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤ ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏î‡∏π‡πÅ‡∏•‡∏´‡πâ‡∏≠‡∏á‡∏û‡∏±‡∏Å‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡∏î‡∏µ‡∏î‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏° ‡∏´‡∏≤‡∏Å‡∏°‡∏µ‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏´‡∏≤‡∏¢‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏ä‡∏î‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á</p>

        <div class="sig-row">
            <div class="sig-block">
                <div class="sig-line"></div>
                ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠......................................................‡∏ú‡∏π‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏ä‡πà‡∏≤<br>
                (<input type="text" id="sig_owner" style="text-align:center; width:180px;">)
            </div>
            <div class="sig-block">
                <div class="sig-line"></div>
                ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠......................................................‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤<br>
                (<input type="text" id="sig_tenant" style="text-align:center; width:180px;">)
            </div>
            <div class="sig-block">
                <div class="sig-line"></div>
                ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠......................................................‡∏û‡∏¢‡∏≤‡∏ô<br>
                (<input type="text" style="text-align:center; width:180px;">)
            </div>
            <div class="sig-block">
                <div class="sig-line"></div>
                ‡∏•‡∏á‡∏ä‡∏∑‡πà‡∏≠......................................................‡∏û‡∏¢‡∏≤‡∏ô<br>
                (<input type="text" style="text-align:center; width:180px;">)
            </div>
        </div>
    </div>
</div>

<script>
    let activeRoom = null;
    let db = JSON.parse(localStorage.getItem('dorm_system_v2')) || {};

    function renderFloorPlan() {
        const container = document.getElementById('floor-plan');
        container.innerHTML = '';
        for (let f = 5; f >= 1; f--) {
            let html = `<div class="floor-section"><div class="floor-title">üè¢ ‡∏ä‡∏±‡πâ‡∏ô‡∏ó‡∏µ‡πà ${f}</div><div class="room-grid">`;
            for (let r = 1; r <= 10; r++) {
                const id = f * 100 + r;
                const isDone = db[id] ? 'has-contract' : '';
                const tenantName = db[id] ? db[id].tenant_name : '‡∏ß‡πà‡∏≤‡∏á';
                html += `
                    <button class="room-btn ${isDone}" onclick="openContract(${id})">
                        <i class="fas fa-check-circle"></i>
                        <span>${id}</span>
                        <small style="font-size:10px; font-weight:normal; opacity:0.8;">${tenantName}</small>
                    </button>`;
            }
            html += `</div></div>`;
            container.innerHTML += html;
        }
    }

    function openContract(roomId) {
        activeRoom = roomId;
        document.getElementById('main-dashboard').style.display = 'none';
        document.getElementById('contract-view').style.display = 'block';
        document.getElementById('display_room').innerText = roomId;
        document.getElementById('c_floor').value = Math.floor(roomId/100);

        if(db[roomId]) {
            const data = db[roomId];
            for (let key in data) {
                const el = document.getElementById(key);
                if(el) el.value = data[key];
            }
        } else {
            document.querySelectorAll('#printable-contract input').forEach(inp => {
                if(!['loc_name', 'loc_name_2', 'owner_name', 'owner_addr', 'sig_owner'].includes(inp.id)) {
                    inp.value = '';
                }
            });
        }
        window.scrollTo(0,0);
    }

    function saveData() {
        const inputs = document.querySelectorAll('#printable-contract input');
        let data = {};
        inputs.forEach(inp => { if(inp.id) data[inp.id] = inp.value; });
        
        db[activeRoom] = data;
        localStorage.setItem('dorm_system_v2', JSON.stringify(db));
        alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á ' + activeRoom + ' ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!');
        closeContract();
    }

    function closeContract() {
        document.getElementById('main-dashboard').style.display = 'block';
        document.getElementById('contract-view').style.display = 'none';
        renderFloorPlan();
    }

    renderFloorPlan();
</script>

</body>
</html>
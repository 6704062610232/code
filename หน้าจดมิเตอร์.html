<!-- ‡∏™‡πà‡∏ß‡∏ô CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏î‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå -->
<style>
:root{
 --c1:#CCD5AE; --c2:#E9EDC9; --c3:#FEFAE0; --c4:#FAEDCD; --c5:#D4A373;
}
body{ font-family: 'Segoe UI', sans-serif; background: var(--c3); padding: 20px; }

.card{ background:white; border-radius:16px; padding:25px; box-shadow:0 4px 15px rgba(0,0,0,.08); max-width: 1100px; margin: auto; }
.card h3{ margin-top:0; border-bottom:2px solid var(--c2); padding-bottom:10px; margin-bottom:20px; color:var(--c5); }

/* Filter Bar */
.filter-bar{ margin-bottom:15px; display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
.filter-btn{ padding:6px 15px; border-radius:15px; border:1px solid var(--c5); background:white; cursor:pointer; font-size:12px; font-weight: bold; }
.filter-btn.active{ background:var(--c5); color:white; }

/* Table Style */
.table-container{ overflow-x:auto; }
.table{ width:100%; border-collapse:collapse; font-size:14px; min-width:800px; }
.table th, .table td{ padding:10px; border:1px solid #eee; text-align:center; }
.table th{ background:#f8f9fa; color: #666; }
.floor-header{ background:var(--c2) !important; text-align:left !important; font-weight:bold; padding-left:15px !important; color: #555; }

/* Input & Logic Colors */
.input-meter{ width:70px; padding:6px; border-radius:8px; border:1px solid var(--c5); text-align:center; font-weight:bold; outline: none; }
.input-meter:focus{ border-color: #A3B18A; background: #fdfdfd; }
.unit-val{ color:#588157; font-weight:bold; }
.btn-main { width: 100%; padding: 15px; border: none; border-radius: 15px; background: var(--c5); color: white; font-weight: bold; cursor: pointer; margin-top: 15px; font-size: 16px; }
</style>

<!-- ‡∏™‡πà‡∏ß‡∏ô HTML -->
<section id="meter">
    <div class="card">
        <h3>üìü ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ô‡πâ‡∏≥-‡πÑ‡∏ü</h3>
        
        <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Å‡∏£‡∏≠‡∏á‡πÄ‡∏•‡∏Ç‡∏ä‡∏±‡πâ‡∏ô -->
        <div class="filter-bar">
            <span>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡∏±‡πâ‡∏ô:</span>
            <button class="filter-btn active" onclick="filterMeterTable('all', this)">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
            <button class="filter-btn" onclick="filterMeterTable(1, this)">‡∏ä‡∏±‡πâ‡∏ô 1</button>
            <button class="filter-btn" onclick="filterMeterTable(2, this)">‡∏ä‡∏±‡πâ‡∏ô 2</button>
            <button class="filter-btn" onclick="filterMeterTable(3, this)">‡∏ä‡∏±‡πâ‡∏ô 3</button>
            <button class="filter-btn" onclick="filterMeterTable(4, this)">‡∏ä‡∏±‡πâ‡∏ô 4</button>
            <button class="filter-btn" onclick="filterMeterTable(5, this)">‡∏ä‡∏±‡πâ‡∏ô 5</button>
        </div>

        <div class="table-container">
            <table class="table">
                <thead>
                    <tr>
                        <th rowspan="2">‡∏´‡πâ‡∏≠‡∏á</th>
                        <th colspan="3" style="background:#e3f2fd">üíß ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥ (Water)</th>
                        <th colspan="3" style="background:#fff3e0">‚ö° ‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü (Electricity)</th>
                        <th rowspan="2">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
                    </tr>
                    <tr style="font-size:11px">
                        <th>‡πÄ‡∏•‡∏Ç‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</th><th>‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà</th><th>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</th>
                        <th>‡πÄ‡∏•‡∏Ç‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</th><th>‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà</th><th>‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ</th>
                    </tr>
                </thead>
                <tbody id="meterTableBody">
                    <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
                </tbody>
            </table>
        </div>
        
        <button class="btn-main" onclick="alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á 50 ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß')">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏•‡∏Ç‡∏°‡∏¥‡πÄ‡∏ï‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
    </div>
</section>

<!-- ‡∏™‡πà‡∏ß‡∏ô JavaScript -->
<script>
let roomData = [];

// 1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≥‡∏•‡∏≠‡∏á 50 ‡∏´‡πâ‡∏≠‡∏á (‡∏ä‡∏±‡πâ‡∏ô‡∏•‡∏∞ 10 ‡∏´‡πâ‡∏≠‡∏á)
function generateData() {
    for(let f=1; f<=5; f++) {
        for(let r=1; r<=10; r++) {
            let id = f * 100 + r;
            roomData.push({ 
                id: id, 
                floor: f, 
                pw: 120 + (id), // ‡πÄ‡∏•‡∏Ç‡∏ô‡πâ‡∏≥‡πÄ‡∏Å‡πà‡∏≤ (‡∏™‡∏°‡∏°‡∏ï‡∏¥)
                pe: 540 + (id * 2) // ‡πÄ‡∏•‡∏Ç‡πÑ‡∏ü‡πÄ‡∏Å‡πà‡∏≤ (‡∏™‡∏°‡∏°‡∏ï‡∏¥)
            });
        }
    }
    renderMeterTable();
}

// 2. ‡∏ß‡∏≤‡∏î‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
function renderMeterTable() {
    const tbody = document.getElementById('meterTableBody');
    tbody.innerHTML = '';
    let lastFloor = 0;

    roomData.forEach(r => {
        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡πÅ‡∏ö‡πà‡∏á‡∏ä‡∏±‡πâ‡∏ô
        if(r.floor !== lastFloor) {
            lastFloor = r.floor;
            tbody.innerHTML += `<tr data-f="${lastFloor}"><td colspan="8" class="floor-header">üè¢ ‡∏ä‡∏±‡πâ‡∏ô ${lastFloor}</td></tr>`;
        }

        // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á
        tbody.innerHTML += `
            <tr data-f="${r.floor}">
                <td><b>${r.id}</b></td>
                <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ô‡πâ‡∏≥ -->
                <td><span id="pw-${r.id}">${r.pw}</span></td>
                <td><input type="number" class="input-meter" oninput="calcUnit('${r.id}')" id="cw-${r.id}" placeholder="0"></td>
                <td id="uw-${r.id}" class="unit-val">0</td>
                <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÑ‡∏ü -->
                <td><span id="pe-${r.id}">${r.pe}</span></td>
                <td><input type="number" class="input-meter" oninput="calcUnit('${r.id}')" id="ce-${r.id}" placeholder="0"></td>
                <td id="ue-${r.id}" class="unit-val">0</td>
                <!-- ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ -->
                <td id="st-${r.id}" style="color:#ccc; font-size:11px">‡∏£‡∏≠‡∏à‡∏î</td>
            </tr>`;
    });
}

// 3. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏´‡∏ô‡πà‡∏ß‡∏¢ (‡πÄ‡∏•‡∏Ç‡πÉ‡∏´‡∏°‡πà - ‡πÄ‡∏•‡∏Ç‡πÄ‡∏Å‡πà‡∏≤)
function calcUnit(id) {
    const pw = parseInt(document.getElementById(`pw-${id}`).innerText);
    const cw = parseInt(document.getElementById(`cw-${id}`).value) || 0;
    const pe = parseInt(document.getElementById(`pe-${id}`).innerText);
    const ce = parseInt(document.getElementById(`ce-${id}`).value) || 0;

    const waterUnit = (cw - pw) > 0 ? (cw - pw) : 0;
    const electricUnit = (ce - pe) > 0 ? (ce - pe) : 0;

    document.getElementById(`uw-${id}`).innerText = waterUnit;
    document.getElementById(`ue-${id}`).innerText = electricUnit;

    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ß‡∏ñ‡πâ‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏£‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏Ñ‡∏π‡πà
    const statusCell = document.getElementById(`st-${id}`);
    if(cw > pw && ce > pe) {
        statusCell.innerText = '‚úÖ ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢';
        statusCell.style.color = 'green';
        statusCell.style.fontWeight = 'bold';
    } else {
        statusCell.innerText = '‡∏£‡∏≠‡∏à‡∏î';
        statusCell.style.color = '#ccc';
        statusCell.style.fontWeight = 'normal';
    }
}

// 4. ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏Å‡∏£‡∏≠‡∏á‡∏ä‡∏±‡πâ‡∏ô
function filterMeterTable(f, btn) {
    // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏∏‡πà‡∏° Active
    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');

    // ‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡πÅ‡∏ñ‡∏ß‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á
    const rows = document.querySelectorAll('#meterTableBody tr');
    rows.forEach(row => {
        if(f === 'all') {
            row.style.display = '';
        } else {
            row.style.display = row.getAttribute('data-f') == f ? '' : 'none';
        }
    });
}

// ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
generateData();
</script>